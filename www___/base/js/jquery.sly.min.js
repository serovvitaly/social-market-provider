/*! Sly 1.0.0-rc.5 27-Jan-2013 | https://github.com/Darsain/sly */
(function(g,F,P){function $(f,b,ha){var j,n,ia,u,x,F;function G(a,va){if(H&&c.released){var p=ja(a),ma=a>d.start&&a<d.end;Q?(ma&&(a=l[p.centerItem].center),B&&e.activate(p.centerItem,1)):ma&&(a=l[p.firstItem].start)}!c.released&&"slidee"===c.source&&b.elasticBounds?a>d.end?a=d.end+(a-d.end)/6:a<d.start&&(a=d.start+(a-d.start)/6):a=I(a,d.start,d.end);j=+new Date;n=0;ia=d.cur;u=a;x=a-d.cur;F=va;d.dest=a;c.released&&!R&&e.cycle();g.extend(h,ja(void 0));$();aa[0]&&J.page!==h.activePage&&(J.page=h.activePage,
aa.removeClass(b.activeClass).eq(h.activePage).addClass(b.activeClass));a!==d.cur&&(z("change"),N||M())}function M(){N?(F||(!c.released?"slidee"===c.source:33>b.speed)?d.cur=u:!c.released&&"handle"===c.source?d.cur+=(u-d.cur)*b.syncFactor:(n=Math.min(+new Date-j,b.speed),d.cur=ia+x*jQuery.easing[b.easing](n/b.speed,n,0,1,b.speed)),u===Math.round(d.cur)&&(!c.released||n>=b.speed)?(d.cur=d.dest,N=0):N=ea(M),z("move"),C||(K?r[0].style[K]=(b.horizontal?"translateX":"translateY")+"("+-d.cur+"px)":r[0].style[b.horizontal?
"left":"top"]=-Math.round(d.cur)+"px"),!N&&c.released&&z("moveEnd"),Z()):(N=ea(M),c.released&&z("moveStart"))}function Z(){y&&(q.cur=d.start===d.end?0:((!c.released&&"handle"===c.source?d.dest:d.cur)-d.start)/(d.end-d.start)*q.end,q.cur=I(Math.round(q.cur),q.start,q.end),J.hPos!==q.cur&&(J.hPos=q.cur,K?y[0].style[K]=(b.horizontal?"translateX":"translateY")+"("+q.cur+"px)":y[0].style[b.horizontal?"left":"top"]=q.cur+"px"))}function ka(a,b,p){"boolean"===typeof b&&(p=b,b=P);b===P?G(d[a]):Q&&"center"!==
a||(b=e.getPos(b))&&G(b[a],p)}function la(a){return S(a)?I(a,0,l.length-1):a===P?-1:s.index(a)}function T(a,b){return parseInt(a.css(b),10)}function ja(a){a=I(S(a)?a:d.dest,d.start,d.end);var b={},p=B?0:v/2;if(!C)for(var c=0,e=w.length;c<e;c++){if(a>=d.end||c===w.length-1){b.activePage=w.length-1;break}if(a<=w[c]+p){b.activePage=c;break}}if(H){for(var e=c=p=!1,f=0,h=l.length;f<h;f++){!1===p&&a<=l[f].start&&(p=f);!1===e&&a-l[f].size/2<=l[f].center&&(e=f);if(f===l.length-1||!1===c&&a<l[f+1].end)c=f;
if(!1!==c)break}b.firstItem=S(p)?p:0;b.centerItem=S(e)?e:b.firstItem;b.lastItem=S(c)?c:b.centerItem}return b}function $(){if(H){var a=0===h.activeItem,c=h.activeItem>=l.length-1,e=a?"first":c?"last":"middle";J.itemsButtonState!==e&&(J.itemsButtonState=e,U.is("button,input")&&U.prop("disabled",a),V.is("button,input")&&V.prop("disabled",c),U[a?"removeClass":"addClass"](b.disabledClass),V[c?"removeClass":"addClass"](b.disabledClass))}aa[0]&&(a=d.dest<=d.start,c=d.dest>=d.end,e=a?"first":c?"last":"middle",
J.pagesButtonState!==e&&(J.pagesButtonState=e,W.is("button,input")&&W.prop("disabled",a),X.is("button,input")&&X.prop("disabled",c),W[a?"removeClass":"addClass"](b.disabledClass),X[c?"removeClass":"addClass"](b.disabledClass)))}function da(a){return Math.round(I(a,q.start,q.end)/q.end*(d.end-d.start))+d.start}function na(a){var e="touchstart"===a.type,p=a.data.source,f="slidee"===p;if(e||1>=a.which)A(a),c.source=p,c.$source=g(a.target),c.init=0,c.released=0,c.touch=e,c.initLoc=(e?a.originalEvent.touches[0]:
a)[b.horizontal?"pageX":"pageY"],c.initPos=f?d.cur:q.cur,c.start=+new Date,c.time=0,c.path=0,c.pathMin=f?-c.initLoc:-q.cur,c.pathMax=f?document[b.horizontal?"width":"height"]-c.initLoc:q.end-q.cur,(f?r:y).addClass(b.draggedClass),fa.on(e?oa:pa,qa)}function qa(a){c.released="mouseup"===a.type||"touchend"===a.type;c.path=I((c.touch?a.originalEvent[c.released?"changedTouches":"touches"][0]:a)[b.horizontal?"pageX":"pageY"]-c.initLoc,c.pathMin,c.pathMax);if(!c.init&&(Math.abs(c.path)>(c.touch?50:10)||
"handle"===c.source))c.init=1,"slidee"===c.source&&(ga=1),e.pause(1),c.$source.on("click",function p(a){A(a,1);"slidee"===c.source&&(ga=0);c.$source.off("click",p)}),z("moveStart");c.init&&(A(a),c.released&&("slidee"===c.source&&33<b.speed)&&(c.path+=200*c.path/(+new Date-c.start)),G("slidee"===c.source?Math.round(c.initPos-c.path):da(c.initPos+c.path)));c.released&&(fa.off(c.touch?oa:pa,qa),("slidee"===c.source?r:y).removeClass(b.draggedClass),d.cur===d.dest&&z("moveEnd"))}function z(a,c,e,g,k){switch(a){case "active":e=
c;c=s;break;case "activePage":e=c;c=w;break;default:k=c,c=d,e=s,g=h}if(t[a])for(var l=0,m=t[a].length;l<m;l++)t[a][l].call(f,c,e,g,k);b.domEvents&&!C&&D.trigger(ba+":"+a,[c,e,g,k])}b=g.extend({},g.fn[ba].defaults,b);var e=this,ra=0,C=S(f),fa=g(document),D=g(f),r=D.children().eq(0),v=0,m=0,d={start:0,center:0,end:0,cur:0,dest:0},E=g(b.scrollBar).eq(0),y=E.length?E.children().eq(0):0,ca=0,O=0,q={start:0,end:0,cur:0},Y=g(b.pagesBar),aa=0,w=[],wa="basic"===b.itemNav,sa="smart"===b.itemNav,B="forceCentered"===
b.itemNav,Q="centered"===b.itemNav||B,H=!C&&(wa||sa||Q||B),s=0,l=[],h={firstItem:0,lastItem:1,centerItem:1,activeItem:-1,activePage:0,items:0,pages:0},ta=b.scrollSource?g(b.scrollSource):D,xa=b.dragSource?g(b.dragSource):D,U=g(b.prev),V=g(b.next),W=g(b.prevPage),X=g(b.nextPage),t={},J={};F=x=u=ia=n=j=void 0;var c={released:1},ua="touchstart."+k+" mousedown."+k,pa="mousemove."+k+" mouseup."+k,oa="touchmove."+k+" touchend."+k,N=0,L=0,R=0,ga=0,ya=e.reload=function(){var a=0;d.old=g.extend({},d);v=C?
0:D[b.horizontal?"width":"height"]();ca=E[b.horizontal?"width":"height"]();m=C?f:r[b.horizontal?"outerWidth":"outerHeight"]();w=[];d.start=0;d.end=Math.max(m-v,0);J={};if(H){s=r.children(":visible");h.items=s.length;l=[];var c=T(r,b.horizontal?"paddingLeft":"paddingTop"),p=T(r,b.horizontal?"paddingRight":"paddingBottom"),k=T(s,b.horizontal?"marginLeft":"marginTop"),a=T(s.slice(-1),b.horizontal?"marginRight":"marginBottom"),n=0,ha="none"!==s.css("float"),a=k?0:a;m=0;s.each(function(a,e){var d=g(e),
f=d[b.horizontal?"outerWidth":"outerHeight"](!0),h=T(d,b.horizontal?"marginLeft":"marginTop"),d=T(d,b.horizontal?"marginRight":"marginBottom"),j={size:f,start:m-(!a||b.horizontal?0:h),center:m-Math.round(v/2-f/2),end:m-v+f-(k?0:d)};a||(n=-(B?Math.round(v/2-f/2):0)+c,m+=c);m+=f;!b.horizontal&&!ha&&d&&(h&&0<a)&&(m-=Math.min(h,d));a===s.length-1&&(m+=p);l.push(j)});r[0].style[b.horizontal?"width":"height"]=m+"px";m-=a;d.start=n;d.end=B?l[l.length-1].center:Math.max(m-v,0);h.activeItem>=l.length?e.activate(l.length-
1):1===l.length&&s.eq(h.activeItem).addClass(b.activeClass)}d.center=Math.round(d.end/2+d.start/2);g.extend(h,ja(void 0));y&&(O=b.dynamicHandle?Math.round(ca*v/m):y[b.horizontal?"outerWidth":"outerHeight"](),b.dynamicHandle&&(O=I(O,b.minHandleSize,ca),y[0].style[b.horizontal?"width":"height"]=O+"px"),q.end=ca-O,N||Z());if(!C){var j=d.start,a="",t=0;if(H)g.each(l,function(a,b){if(B||b.start+b.size>j)j=b[B?"center":"start"],w.push(j),j+=v});else for(;j-v<=d.end;)w.push(j),j+=v;if(Y[0]){for(var u=0;u<
w.length;u++)a+=b.pageBuilder(t++);aa=g(a).appendTo(Y.empty())}}G(I(d.dest,d.start,d.end));h.pages=w.length;h.slideeSize=m;h.frameSize=v;h.sbSize=ca;h.handleSize=O;z("load")};e.getPos=function(a){if(a===P)return d;if(H)return a=la(a),-1!==a?l[a]:!1;var c=r.find(a).eq(0);return c[0]?(a=b.horizontal?c.offset().left-r.offset().left:c.offset().top-r.offset().top,c=c[b.horizontal?"outerWidth":"outerHeight"](),{start:a,center:a-v/2+c/2,end:a-v+c,size:c}):!1};e.getRel=function(){return h};e.prev=function(){e.activate(h.activeItem-
1)};e.next=function(){e.activate(h.activeItem+1)};e.prevPage=function(){e.activatePage(h.activePage-1)};e.nextPage=function(){e.activatePage(h.activePage+1)};e.slideBy=function(a,b){G(d.dest+a,b)};e.slideTo=function(a,b){G(a,b)};e.toStart=function(a,b){ka("start",a,b)};e.toEnd=function(a,b){ka("end",a,b)};e.toCenter=function(a,b){ka("center",a,b)};e.activate=function(a,d){if(H&&a!==P){var f=la(a),g=h.activeItem;h.activeItem=f;s.eq(g).removeClass(b.activeClass);s.eq(f).addClass(b.activeClass);$();
f!==g&&z("active",f);d||(Q?e.toCenter(f):sa&&(f>=h.lastItem?e.toStart(f):f<=h.firstItem?e.toEnd(f):c.released&&!R&&e.cycle()))}};e.activatePage=function(a){w.length&&(a=I(a,0,w.length-1),G(w[a]),z("activePage",a))};e.cycle=function(a){if(b.cycleBy&&b.cycleInterval&&!("items"===b.cycleBy&&!l[0]||a&&R))R=0,L?L=clearTimeout(L):z("cycleStart"),L=setTimeout(function(){switch(b.cycleBy){case "items":e.activate(h.activeItem>=l.length-1?0:h.activeItem+1);break;case "pages":e.activatePage(h.activePage>=w.length-
1?0:h.activePage+1)}z("cycle")},b.cycleInterval)};e.pause=function(a){a||(R=!0);L&&(L=clearTimeout(L),z("cyclePause"))};e.toggle=function(){e[L?"pause":"cycle"]()};e.set=function(a,c){g.isPlainObject(a)?g.extend(b,a):b.hasOwnProperty(a)&&(b[a]=c)};e.on=function(a,b){if("object"===typeof a)for(var c in a){if(a.hasOwnProperty(c))e.on(c,a[c])}else if(b instanceof Array){c=0;for(var d=b.length;c<d;c++)e.on(a,b[c])}else if("function"===typeof b){t[a]=t[a]||[];c=0;for(d=t[a].length;c<d;c++)if(t[a][c]===
b)return;t[a].push(b)}};e.off=function(a,b){if(t[a])if(b instanceof Array)for(var c=0,d=b.length;c<d;c++)e.off(a,b[c]);else if("function"===typeof b){c=0;for(d=t[a].length;c<d;c++)t[a][c]===b&&t[a].splice(c,1)}else t[a].length=0};e.destroy=function(){fa.add(r).add(ta).add(y).add(E).add(Y).add(U).add(V).add(W).add(X).unbind("."+k);U.add(V).add(W).add(X).removeClass(b.disabledClass);s&&s.eq(h.activeItem).removeClass(b.activeClass);Y.empty();C||(D.unbind("."+k),r.add(y).css(K||(b.horizontal?"left":"top"),
K?"none":0),g.removeData(f,k))};e.init=function(){if(!ra){e.on(ha);C||(D.css("overflow","hidden"),"static"===D.css("position")&&D.css("position","relative"),r.add(y).css(g.extend({position:"absolute"},b.horizontal?{left:0}:{top:0})));"static"===E.css("position")&&E.css("position","relative");ya();H?e.activate(b.startAt):G(b.startAt);if(b.scrollBy)ta.on("DOMMouseScroll."+k+" mousewheel."+k,function(a){if(d.start!==d.end){A(a,1);a=a.originalEvent;var c=0;a.wheelDelta&&(c=0>a.wheelDelta/120);a.detail&&
(c=0>-a.detail/3);H?(a=la((Q?B?h.activeItem:h.centerItem:h.firstItem)+(c?b.scrollBy:-b.scrollBy)),e[Q?B?"activate":"toCenter":"toStart"](a)):e.slideBy(c?b.scrollBy:-b.scrollBy)}});if(b.clickBar&&E[0])E.on("click."+k,function(a){1>=a.which&&(A(a),G(da((b.horizontal?a.clientX-E.offset().left:a.clientY-E.offset().top)-O/2)))});b.keyboardNavBy&&fa.bind("keydown."+k,function(a){switch(a.which){case b.horizontal?37:38:A(a);e["pages"===b.keyboardNavBy?"prevPage":"prev"]();break;case b.horizontal?39:40:A(a),
e["pages"===b.keyboardNavBy?"nextPage":"next"]()}});if(b.prev)U.on("click."+k,function(a){A(a);e.prev()});if(b.next)V.on("click."+k,function(a){A(a);e.next()});if(b.prevPage)W.on("click."+k,function(a){A(a);e.prevPage()});if(b.nextPage)X.on("click."+k,function(a){A(a);e.nextPage()});r.on("click."+k,"*",function(a){1>=a.which&&(this.parentNode===a.delegateTarget&&!ga)&&e.activate(this);ga=0});if(Y[0])Y.on("click."+k,"*",function(){e.activatePage(aa.index(this))});if(b.dragging)xa.on(ua,{source:"slidee"},
na);if(b.dragHandle&&y)y.on(ua,{source:"handle"},na);if(b.cycleBy&&!C){if(b.pauseOnHover)D.on("mouseenter."+k+" mouseleave."+k,function(a){if(!R)e["mouseenter"===a.type?"pause":"cycle"](1)});e[b.startPaused?"pause":"cycle"]()}ra=1;return e}}}function A(f,b){f=f||F.event;f.preventDefault?f.preventDefault():f.returnValue=!1;b&&(f.stopPropagation?f.stopPropagation():f.cancelBubble=!0)}function S(f){return!isNaN(parseFloat(f))&&isFinite(f)}function I(f,b,g){return f<b?b:f>g?g:f}for(var ba="sly",k=ba,
n=F.cancelAnimationFrame||F.cancelRequestAnimationFrame,ea=F.requestAnimationFrame,K,M=window,x=["moz","webkit","o"],da=0,j=0,Z=x.length;j<Z&&!n;++j)ea=(n=M[x[j]+"CancelAnimationFrame"]||M[x[j]+"CancelRequestAnimationFrame"])&&M[x[j]+"RequestAnimationFrame"];n||(ea=function(f){var b=+new Date,g=Math.max(0,16-(b-da));da=b+g;return M.setTimeout(function(){f(b+g)},g)},n=function(f){clearTimeout(f)});n=["transform","webkitTransform","msTransform"];x=document.createElement("div");j=0;for(Z=n.length;j<
Z&&!K;j++)x.style[n[j]]!==P&&(K=n[j]);F.Sly=$;g.fn[ba]=function(f,b){var j,n;if(!g.isPlainObject(f)){if("string"===typeof f||!1===f)j=!1===f?"destroy":f,n=Array.prototype.slice.call(arguments,1);f={}}return this.each(function(A,x){var u=g.data(x,k);!u&&!j?g.data(x,k,(new $(x,f,b)).init()):u&&j&&u[j]&&u[j].apply(u,n)})};g.fn[ba].defaults={horizontal:0,itemNav:null,scrollBar:null,dragHandle:0,dynamicHandle:0,minHandleSize:50,clickBar:0,syncFactor:0.5,pagesBar:null,pageBuilder:function(f){return"<li>"+
(f+1)+"</li>"},prev:null,next:null,prevPage:null,nextPage:null,cycleBy:null,cycleInterval:5E3,pauseOnHover:0,startPaused:0,scrollBy:0,dragging:0,elasticBounds:0,speed:0,easing:"swing",scrollSource:null,dragSource:null,startAt:0,keyboardNavBy:0,domEvents:0,draggedClass:"dragged",activeClass:"active",disabledClass:"disabled"}})(jQuery,window);
